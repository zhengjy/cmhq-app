{"version":3,"sources":["webpack:///D:/develop/git_workspace/web/cmhq-app/components/selectLoc/selectLoc.vue?818c","webpack:///D:/develop/git_workspace/web/cmhq-app/components/selectLoc/selectLoc.vue?cf30","webpack:///D:/develop/git_workspace/web/cmhq-app/components/selectLoc/selectLoc.vue?89dc","webpack:///D:/develop/git_workspace/web/cmhq-app/components/selectLoc/selectLoc.vue?d230","uni-app:///components/selectLoc/selectLoc.vue"],"names":["name","props","showMap","type","default","watch","data","mapkey","lat","lng","weShow","mounted","console","uni","success","that","province","city","area","district","fail","onReady","onShow","methods","close","confirmNew","loadJs","script","document"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;;;AAGxD;AACkL;AAClL,gBAAgB,sLAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAirB,CAAgB,gqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;ACarsB;;;;;;;;;;;;;eACA;EAAA;EACAA;EACAC;IACAC;MACAC;MACAC;IACA;EACA;EACAC,QAEA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACAC;IAEAA;IACA;MACAA;MACAC;QACAC;UACAF;UACAA;UACAA;UACAA;UACA,UACA;UAEA;UACAA;UAEAG;UACAA;UACAA;UACAA;UAEAA;UACAA;UAEAA;YACAC;YACAC;YACAC;YACAC;YACAX;YACAC;UACA;QACA;QACAW;UACAR;QACA;MACA;IACA;EA6BA;EACAS;IACA;EAAA,CAEA;EACAC,2BAEA;EACAC;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;MACAb;MACAG;MACAA;MAEA,UACA;MAEA;MACAH;MAEAG;MACAA;MACAA;MACAA;MAEAA;QACAC;QACAC;QACAC;QACAC;QACAX;QACAC;MACA;MAEAM;MACAA;IACA;IACAW;MACA;MACAC;MACAA;MACAC;IACA;EACA;AACA;AAAA,2B","file":"components/selectLoc/selectLoc.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./selectLoc.vue?vue&type=template&id=4494498e&\"\nvar renderjs\nimport script from \"./selectLoc.vue?vue&type=script&lang=js&\"\nexport * from \"./selectLoc.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../dev_tool/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/selectLoc/selectLoc.vue\"\nexport default component.exports","export * from \"-!../../../../../../dev_tool/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../dev_tool/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../dev_tool/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../dev_tool/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../dev_tool/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../dev_tool/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./selectLoc.vue?vue&type=template&id=4494498e&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../dev_tool/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../dev_tool/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../dev_tool/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../dev_tool/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../dev_tool/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./selectLoc.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../dev_tool/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../dev_tool/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../dev_tool/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../dev_tool/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../dev_tool/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./selectLoc.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\r\n\t\t<!--#ifdef H5-->\r\n\r\n\t\t<Flame-chooseLocation v-model=\"weShow\" :mapkey=\"mapkey\" @confirm=\"confirmNew\" @change=\"close\" :exact=\"true\">\r\n\t\t</Flame-chooseLocation>\r\n\r\n\t\t<!--#endif-->\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport cfg from '../../utils/config.js'\r\n\texport default { //父vue页面传递给组件的参数获取方式\r\n\t\tname: 'selectLoc',\r\n\t\tprops: {\r\n\t\t\tshowMap: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tmapkey: cfg.h5MapKey,\r\n\t\t\t\tlat: '',\r\n\t\t\t\tlng: '',\r\n\t\t\t\tweShow: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tvar that = this;\r\n\t\t\tconsole.log('初始化加载')\r\n\t\t\t//#ifndef H5\r\n\t\t\tconsole.log('不是H5')\r\n\t\t\tif (that.showMap) {\r\n\t\t\t\tconsole.log('打开位置获取')\r\n\t\t\t\tuni.chooseLocation({\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tconsole.log('位置：', res);\r\n\t\t\t\t\t\tconsole.log('详细地址：' + res.address);\r\n\t\t\t\t\t\tconsole.log('纬度：' + res.latitude);\r\n\t\t\t\t\t\tconsole.log('经度：' + res.longitude);\r\n\t\t\t\t\t\tlet reg =\r\n\t\t\t\t\t\t\t\"(?<province>[^省]+自治区|.*?省|.*?行政区|.*?市)?(?<city>[^市]+自治州|.*?地区|.*?行政单位|.+盟|市辖区|.*?市|.*?县)?(?<county>[^(区|市|县|旗|海域|岛)]+区|.*?市|.*?县|.*?旗|.*?海域|.*?岛)?(?<village>.*)\";\r\n\r\n\t\t\t\t\t\tvar dt = res.address.match(reg);\r\n\t\t\t\t\t\tconsole.log('dt', dt);\r\n\r\n\t\t\t\t\t\tthat.province = dt[1];\r\n\t\t\t\t\t\tthat.city = dt[2];\r\n\t\t\t\t\t\tthat.area = dt[3];\r\n\t\t\t\t\t\tthat.district = dt[4].replace('-', '');\r\n\r\n\t\t\t\t\t\tthat.lat = res.latitude;\r\n\t\t\t\t\t\tthat.lng = res.longitude;\r\n\r\n\t\t\t\t\t\tthat.$emit('confirm', {\r\n\t\t\t\t\t\t\tprovince: that.province,\r\n\t\t\t\t\t\t\tcity: that.city,\r\n\t\t\t\t\t\t\tarea: that.area,\r\n\t\t\t\t\t\t\tdistrict: that.district,\r\n\t\t\t\t\t\t\tlat: that.lat,\r\n\t\t\t\t\t\t\tlng: that.lng\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\tconsole.log('地图打开失败', err)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t//#endif\r\n\r\n\t\t\t//#ifdef H5\r\n\t\t\tconsole.log('是h5')\r\n\t\t\t// document.write('<script src=\"https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js\"></scr' + 'ipt>');\r\n\t\t\t// document.write(\r\n\t\t\t// \t'<script src=\"https://map.qq.com/api/gljs?v=1.exp&key=WLRBZ-TLTL5-H5RI6-QXMEJ-DJVJ6-PNBCB\"></scr' +\r\n\t\t\t// \t'ipt>');\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '加载中...'\r\n\t\t\t})\r\n\t\t\tthat.loadJs('https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js');\r\n\t\t\tthat.loadJs('https://map.qq.com/api/gljs?v=1.exp&key=WLRBZ-TLTL5-H5RI6-QXMEJ-DJVJ6-PNBCB');\r\n\r\n\t\t\tvar isfist = uni.getStorageSync('isFist');\r\n\t\t\tif (isfist == 'success') {\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\tthat.weShow = that.showMap;\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tuni.setStorageSync('isFist','success');\r\n\t\t\t\t\tthat.weShow = that.showMap;\r\n\t\t\t\t}, 2000)\r\n\t\t\t}\r\n\r\n\t\t\tconsole.log('加载h5', that.weShow)\r\n\t\t\t//#endif\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\t//如果是H5则注入JS\r\n\r\n\t\t},\r\n\t\tonShow() {\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tclose() {\r\n\t\t\t\tthis.weShow = false;\r\n\t\t\t\tthis.showMap = false;\r\n\t\t\t\tthis.$emit('close', false)\r\n\t\t\t},\r\n\t\t\tconfirmNew(e) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tconsole.log('confirm', e);\r\n\t\t\t\tthat.lat = e.location.lat;\r\n\t\t\t\tthat.lng = e.location.lng;\r\n\r\n\t\t\t\tlet reg =\r\n\t\t\t\t\t\"(?<province>[^省]+自治区|.*?省|.*?行政区|.*?市)?(?<city>[^市]+自治州|.*?地区|.*?行政单位|.+盟|市辖区|.*?市|.*?县)?(?<county>[^(区|市|县|旗|海域|岛)]+区|.*?市|.*?县|.*?旗|.*?海域|.*?岛)?(?<village>.*)\";\r\n\r\n\t\t\t\tvar dt = e.address.match(reg);\r\n\t\t\t\tconsole.log('dt', dt);\r\n\r\n\t\t\t\tthat.province = dt[1];\r\n\t\t\t\tthat.city = dt[2];\r\n\t\t\t\tthat.area = dt[3];\r\n\t\t\t\tthat.district = dt[4].replace('-', '');\r\n\r\n\t\t\t\tthat.$emit('confirm', {\r\n\t\t\t\t\tprovince: that.province,\r\n\t\t\t\t\tcity: that.city,\r\n\t\t\t\t\tarea: that.area,\r\n\t\t\t\t\tdistrict: that.district,\r\n\t\t\t\t\tlat: that.lat,\r\n\t\t\t\t\tlng: that.lng\r\n\t\t\t\t})\r\n\r\n\t\t\t\tthat.weShow = false;\r\n\t\t\t\tthat.showMap = false;\r\n\t\t\t},\r\n\t\t\tloadJs(url) {\r\n\t\t\t\tvar script = document.createElement('script');\r\n\t\t\t\tscript.type = \"text/javascript\";\r\n\t\t\t\tscript.src = url;\r\n\t\t\t\tdocument.body.appendChild(script);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n<style>\r\n</style>\n"],"sourceRoot":""}